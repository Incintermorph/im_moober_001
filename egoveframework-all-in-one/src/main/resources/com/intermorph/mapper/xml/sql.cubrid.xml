<?xml version="1.0" encoding= "utf-8"?>
<generator>
    <filename><![CDATA[IM<!table_name_Pascal!>_SQL_cubrid.xml]]></filename>
    <source>
    <![CDATA[
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="<!package_name!>.<!component_name!>.service.IM<!table_name_Pascal!>Mapper">

    <insert id="insert" parameterType="<!package_name!>.<!component_name!>.service.IM<!table_name_Pascal!>VO" useGeneratedKeys="false">
/* IM<!table_name_Pascal!>Mapper.insert */
INSERT INTO <!db_table_name_Lowercase!> (
<!iterate_insert_column!>
    del_yn,
    frst_reger_id,
    frst_reg_dt,
    frst_reger_ip
) VALUES (
<!iterate_insert_column_value!>
     'N',
    #{frstRegerId, jdbcType=VARCHAR},
    TO_CHAR(SYSDATETIME, 'yyyymmddhh24miss'),
    #{frstRegerIp, jdbcType=VARCHAR}
) 
    </insert>

    <update id="update" parameterType="<!package_name!>.<!component_name!>.service.IM<!table_name_Pascal!>VO">
/* IM<!table_name_Pascal!>Mapper.update */
UPDATE <!db_table_name_Lowercase!>
   SET 
<!iterate_update_column!>
	   last_mdfer_id = #{lastMdferId, jdbcType=VARCHAR},
       last_mdfcn_dt = TO_CHAR(SYSDATETIME, 'yyyymmddhh24miss'),
       last_mdfer_ip = #{lastMdferIp, jdbcType=VARCHAR}
 WHERE
<!iterate_primary_key_where!>
   AND del_yn = 'N' 
    </update>

    <update id="delete" parameterType="<!package_name!>.<!component_name!>.service.IM<!table_name_Pascal!>VO">
/* IM<!table_name_Pascal!>Mapper.delete */
UPDATE <!db_table_name_Lowercase!> 
   SET last_mdfer_id = #{lastMdferId, jdbcType=VARCHAR},
       last_mdfcn_dt = TO_CHAR(SYSDATETIME, 'yyyymmddhh24miss'),
       last_mdfer_ip = #{lastMdferIp, jdbcType=VARCHAR},
       del_yn = 'Y' 
 WHERE 
<!iterate_primary_key_where!>
   AND del_yn = 'N'
    </update>

    <resultMap id="selectDetailResultMap" type="<!package_name!>.<!component_name!>.service.IM<!table_name_Pascal!>ResultSet">
<!iterate_resultmap_column!>
    </resultMap>
    <select id="selectDetail" parameterType="<!package_name!>.<!component_name!>.service.IM<!table_name_Pascal!>VO" resultMap="selectDetailResultMap">
        /* IM<!table_name_Pascal!>Mapper.selectDetail */
SELECT 
<!iterate_select_column!>  
  FROM <!db_table_name_Lowercase!> A
 WHERE
<!iterate_primary_key_where!>
   AND A.del_yn = 'N'
    </select>


    <resultMap id="selectListResultMap" type="<!package_name!>.<!component_name!>.service.IM<!table_name_Pascal!>ResultSet">
<!iterate_resultmap_column!>
    </resultMap>
    <select id="selectList" parameterType="<!package_name!>.<!component_name!>.service.IM<!table_name_Pascal!>Condition" resultMap="selectListResultMap">
/* IM<!table_name_Pascal!>Mapper.selectList */
         <if test='currentPageNo != 0'>
SELECT * FROM ( SELECT rownum rn, TB.* FROM (
        </if>
SELECT
<!iterate_select_column!>
  FROM <!db_table_name_Lowercase!> A
 WHERE A.del_yn = 'N'
 
  		<choose>
            <when test='orderbyKey == 1'>ORDER BY A.frst_reg_dt ASC</when>
            <when test='orderbyKey == -1'>ORDER BY A.frst_reg_dt DESC</when>
            <otherwise>ORDER BY A.frst_reg_dt DESC</otherwise>
        </choose>

        <if test='currentPageNo != 0'>
        ) TB ) WHERE rn BETWEEN #{firstItemNo}+1  AND #{firstItemNo} + #{recordCountPerPage}
        </if>
    </select>

    <select id="selectListCount" parameterType="<!package_name!>.<!component_name!>.service.IM<!table_name_Pascal!>Condition" resultType="int">
/* IM<!table_name_Pascal!>Mapper.selectListCount */
SELECT COUNT(*) 
  FROM <!db_table_name_Lowercase!> A
 WHERE A.del_yn = 'N'  
    </select>
</mapper>
    ]]>
    </source>

    <iterate>
        <insert_column spacesize="4" audit="false">
        <![CDATA[
<!db_column_name_Lowercase!>,
        ]]>
        </insert_column>

        <insert_column_value spacesize="4" audit="false">
        <![CDATA[
#{<!column_name_Camel!>, jdbcType=<!jdbc_type_Uppercase!>},
        ]]>
        </insert_column_value>

        <update_column spacesize="7" audit="false">
        <![CDATA[
       <if test='<!column_name_Camel!> != null'>
<!db_column_name_Lowercase!> = #{<!column_name_Camel!>, jdbcType=<!jdbc_type_Uppercase!>},
</if>
        ]]>
        </update_column>

        <primary_key_where spacesize="7" join="AND ">
        <![CDATA[
<!db_column_name_Lowercase!> = #{<!column_name_Camel!>}
        ]]>
        </primary_key_where>

        <resultmap_column spacesize="8">
        <![CDATA[
<result column="A.<!column_name_Camel!>" property="<!table_name_Camel!>.<!column_name_Camel!>"/>
        ]]>
        </resultmap_column>

        <select_column spacesize="7">
        <![CDATA[
A.<!db_column_name_Lowercase!> AS "A.<!column_name_Camel!>",
        ]]>
        </select_column>

    </iterate>
    
</generator>